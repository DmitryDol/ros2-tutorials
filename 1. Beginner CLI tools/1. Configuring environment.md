# Configuring environment

**Цель**: Настроить окружение ROS 2 для работы. 

ROS 2 основывается на идее комбинирования рабочих пространств. «Рабочее пространство» (Workspace) – особый термин использующийся в ROS 2, обозначающий каталог, где располагаются все пакеты ROS 2 
Основное рабочее пространство называется андерлэй (underlay). Дополнительные же рабочие пространства называются оверлэями (overlay). Разрабатывая на ROS 2 вы часто будете иметь дело с несколькими активными рабочими пространствами одновременно.
Использование рабочих пространств облегчает использования разных версий ROS 2 или разных наборов пакетов. Это  также позволяет устанавливать различные дистрибутивы ROS 2 на один компьютер и переключаться между ними.


## 1. Запуск setup-файла

Чтобы выполнять команды ROS 2 при запуске каждого нового процесса оболочки необходимо выполнить команду:

```shell
source /opt/ros/humble/setup.bash
```

## 2. Автоматизация запуска setup-файла при запуске оболочки

Для того, чтобы не запускать setup-файл при каждом новом открытии оболочки, можно добавить его в список автозапуска оболочки. Для этого на Linux необходимо выполнить команду:

```shell
echo "source /opt/ros/humble/setup.bash" >> ~/.bashrc
```

> Чтобы отменить это, найдите сценарий запуска оболочки вашей системы и удалите добавленную команду.

## 3. Проверка переменных среды

Если у вас возникнут проблемы с поиском или использованием пакетов ROS 2, убедитесь, что ваше окружение правильно настроено, выполнив следующую команду:

```shell
printenv | grep -i ROS
```

Необходимо проверить, что установлены переменные:

```shell
ROS_VERSION=2
ROS_PYTHON_VERSION=3
ROS_DISTRO=humble
```

### 3.1 Переменная `ROS_DOMAIN_ID` 

ROS_DOMAIN_ID – уникальный номер для группы узлов (nodes) ROS 2. Рекомендуется использовать любое число от 0 до 101 (включительно). По умолчанию ROS_DOMAIN_ID = 0. При необходимости работать с ROS 2 по сети можно сконфигурировать эту переменную, используя команды оболочки.


Установить ROS_DOMAIN_ID можно с помощью следующей команды:

```shell
echo "export ROS_DOMAIN_ID=42" >> ~/.bashrc
```

### 3.2 The `ROS_LOCALHOST_ONLY` variable

По умолчанию коммуникация в ROS2 происходит в том числе в локальной сети. Это может мешать при работе в сети, где другие пользователи также используют ROS. Во избежание этой проблемы необходимо установить переменную ROS_LOCALHOST_ONLY=1.

Установить ROS_LOCALHOST_ONLY можно с помощью следующей команды:

```shell
echo "export ROS_LOCALHOST_ONLY=1" >> ~/.bashrc
```